import { RedocApiReference } from "@/components/docs/redoc-api-reference";

export const metadata = {
  title: "API Reference",
  description: "OpenAPI-style reference with payload schemas, responses, and playbook context.",
  section: "Developer",
  order: 1,
};

Use this page as your implementation reference. It shows user-facing API operations with auth,
path/query parameters, request fields, and success response schema details sourced from the synced
backend OpenAPI snapshot.

## Base URL + auth

- Base path: `/api`
- Default API auth: `Authorization: Bearer <dashboard-jwt>`
- Preview creation auth: `x-preview-token` or bearer JWT
- Preview status auth: `x-preview-status-token` or bearer JWT (when enabled)
- Rate limiting: `429` with `Retry-After`

## Serve surfaces (outside `/api`)

Serving endpoints are not in the OpenAPI `/api` group, but they are part of the user-facing
feature set.

- Serving enable/disable operation: `POST /api/sites/{siteId}/locales/{targetLang}/serve`
  (`sites.locales.serve`)
- Localized pages: `GET /{path}`
- Preview pages: `GET /_preview/{previewId}`
- Surface auth: `None`

For rollout sequencing, use the backend playbook label `Playbook: Serving Access and Previews`.

## Workflows

Use [Workflow Playbooks](../workflows) when you need ordered, task-specific guidance (setup,
domain verification, crawl/translate, previews). Use this page for schema-level contracts.

## OpenAPI Explorer

<RedocApiReference />

## Error model

- Standard API errors return:
  - `{"error":"<message>","details":...}`
- Common statuses:
  - `400` invalid request
  - `401` auth invalid or expired
  - `403` entitlement or permission issue
  - `404` resource not found
  - `429` rate limited
  - `5xx` upstream or internal failure

## Related docs

- [Getting Started](../getting-started)
- [Domain + CNAME Setup](../site-setup)
- [Translation Pipeline](../translation-pipeline)
